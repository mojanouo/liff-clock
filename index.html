<script>
const liffId = "2008996338-0gw2Kj6n";
const apiUrl = "https://script.google.com/macros/s/AKfycbz-EVDHnNhcgVMIj-B5Qt7P-CAllJEKjUkTkSHUH6_nAPAecfbJB7zW_sD-C_sgUimj/exec";

async function main() {
  await liff.init({ liffId });

  const profile = await liff.getProfile();

  document.getElementById("name").innerHTML = `
    你好 ${profile.displayName}<br><br>
    <button onclick="clock()">打卡</button>
    <p id="msg"></p>
  `;

  window.clock = async () => {
    document.getElementById("msg").innerText = "送出中...";

    await fetch(apiUrl, {
      method: "POST",
      body: JSON.stringify({
        userId: profile.userId,
        name: profile.displayName
      })
    });

    document.getElementById("msg").innerText = "✅ 打卡完成";
  };
}

main();
</script>
